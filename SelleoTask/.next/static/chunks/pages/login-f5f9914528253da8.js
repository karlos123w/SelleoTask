(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3236:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(3237)}])},3237:function(e,s,t){"use strict";t.r(s);var n=t(5893),r=t(7294),o=t(948),a=t(1233),i=t(6242),u=t(1321),l=t(9417),c=t(2819),d=t(8912),h=t(1163);(0,o.ZP)("div")({}),s.default=e=>{let[s,t]=(0,r.useState)(""),[o,g]=(0,r.useState)(""),[p,w]=(0,r.useState)(!1),m=(0,h.useRouter)(),f=async()=>{w(!0);let e=await d.Q.login({email:s,pass:o});if(w(!1),!e.ok)return window.alert(e.message);e.user&&(d.Q.saveUserInSession(e.user),m.push("/"))};return(0,n.jsx)(c.Z,{children:(0,n.jsx)(a.Z,{direction:"row",justifyContent:"center",alignItems:"center",height:"100vh",children:(0,n.jsx)(i.Z,{children:(0,n.jsxs)(a.Z,{spacing:2,padding:2,width:400,children:[(0,n.jsx)("h1",{style:{textAlign:"center"},children:"Selleo"}),(0,n.jsx)(u.Z,{label:"Email",placeholder:"email",type:"email",value:s,onChange:e=>t(e.target.value)}),(0,n.jsx)(u.Z,{label:"Password",placeholder:"password",value:o,onChange:e=>g(e.target.value),type:"password"}),(0,n.jsx)(l.Z,{variant:"contained",onClick:f,disabled:p,children:"Login"}),(0,n.jsx)(l.Z,{onClick:()=>m.push("/register"),children:"Registration"})]})})})})}},8912:function(e,s,t){"use strict";t.d(s,{Q:function(){return r}});var n=t(5121);let r={login:async e=>{try{var s,t;let r=await n.Z.post("/auth/login",e);return{ok:!0,status:r.status,message:null!==(s=r.data.message)&&void 0!==s?s:"success",user:null!==(t=r.data)&&void 0!==t?t:null}}catch(t){console.log(t);let e="Something went wrong",s=400;return"AxiosError: Network Error"===e&&(e="Network connection lost"),n.Z.isAxiosError(t)&&t.response&&(404===t.response.status&&(e="Item not found!"),403===t.response.status&&(e="Action forbidden!"),t.response.status&&(s=t.response.status)),{message:e,status:s,ok:!1,user:null}}},saveUserInSession:e=>{let s=JSON.stringify(e);sessionStorage.setItem("user",s),n.Z.defaults.headers.common.Authorization="Bearer ".concat(e.token)},checkUserInSession:()=>{let e=sessionStorage.getItem("user");if(!e)return null;{let s=JSON.parse(e);return n.Z.defaults.headers.common.Authorization="Bearer ".concat(s.token),s}},logout:()=>{n.Z.defaults.headers.common.Authorization="",sessionStorage.removeItem("user")},register:async e=>{try{var s,t;let r=await n.Z.post("/users/register",e);return{ok:!0,status:r.status,message:null!==(s=r.data.message)&&void 0!==s?s:"success",user:null!==(t=r.data)&&void 0!==t?t:null}}catch(t){console.log(t);let e="Something went wrong",s=400;return"AxiosError: Network Error"===e&&(e="Network connection lost"),n.Z.isAxiosError(t)&&t.response&&(404===t.response.status&&(e="Item not found!"),403===t.response.status&&(e="Action forbidden!"),t.response.status&&(s=t.response.status)),{message:e,status:s,ok:!1,user:null}}}}},2819:function(e,s,t){"use strict";var n=t(5893),r=t(948),o=t(5582);let a=(0,r.ZP)("div")({});s.Z=e=>{let{children:s}=e;return(0,n.jsx)(a,{children:(0,n.jsx)(o.Z,{children:s})})}}},function(e){e.O(0,[432,222,888,774,179],function(){return e(e.s=3236)}),_N_E=e.O()}]);